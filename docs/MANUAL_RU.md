# Краткое руководство по Flux Auto-Deleter

## ⚠️ ВАЖНО: ОТКАЗ ОТ ОТВЕТСТВЕННОСТИ (DISCLAIMER)

**ПОЖАЛУЙСТА, ВНИМАТЕЛЬНО ПРОЧТИТЕ ПЕРЕД ИСПОЛЬЗОВАНИЕМ.**

Данное программное обеспечение (`FluxAutoDeleter`) предназначено для **АВТОМАТИЧЕСКОГО БЕЗВОЗВРАТНОГО УДАЛЕНИЯ** приложений и данных с ваших узлов Flux.

1.  **Опасность потери данных:** Основная функция этой программы — отправка команд на удаление приложений. После удаления приложение **НЕВОЗМОЖНО ВОССТАНОВИТЬ** с помощью этой утилиты. Все данные, связанные с удалённым приложением, могут быть потеряны навсегда.
2.  **Ответственность пользователя:** Вы несёте полную ответственность за корректность файла настроек `settings.ini`. Указание неверного или слишком общего префикса в `TargetAppPrefixes` может привести к случайному удалению *всех* или *критически важных* приложений.
3.  **Отсутствие гарантий:** Автор(ы) и участники разработки данного ПО **НЕ НЕСУТ ОТВЕТСТВЕННОСТИ** за любой прямой, косвенный, случайный или иной ущерб (включая, но не ограничиваясь потерей данных, прибыли или перерывами в работе узлов), возникший в результате использования или невозможности использования данной программы.

Запуская данное программное обеспечение, вы подтверждаете, что понимаете эти риски и используете его исключительно по своему усмотрению.

---

## 1. Назначение приложения

**Flux Auto-Deleter** — это настольное приложение для мониторинга ваших узлов (нод) Flux. Оно позволяет отслеживать активность и, при необходимости, автоматически удалять нежелательные приложения (согласно вашему черному списку), обеспечивая контроль над использованием ресурсов вашего оборудования.

## 2. Установка и Запуск

Для работы программы **не требуется** установка дополнительных компонентов.

1.  **Portable-версия (ZIP-архив):**
    1.  Скачайте и распакуйте архив `FluxAutoDeleter_Portable_X.X.X.zip` в удобную папку (например, на Рабочий стол).
    2.  Внутри вы найдёте файл запуска `FluxAutoDeleter_Portable_X.X.X.exe` и файл настроек `settings.ini`.
    3.  Настройте `settings.ini` (см. раздел "Настройка").
    4.  Запустите `.exe` файл.

2.  **Установщик (Setup):**
    *   Запустите файл `FluxAutoDeleter_Setup_X.X.X.exe` и следуйте инструкциям установки.
    2.  После установки ярлык появится на рабочем столе.
    3.  Файл настроек `settings.ini` будет находиться в папке установки программы:
        *   **Только для меня:** `%LocalAppData%\Programs\FluxAutoDeleter`
        *   **Для всех пользователей:** `%ProgramFiles%\FluxAutoDeleter`

## 3. Обзор Интерфейса

Интерфейс приложения специально упрощен для максимальной стабильности и безопасности.

### Особенности окна
*   **Фиксированный размер:** Окно приложения имеет фиксированный размер и **не разворачивается на весь экран** стандартной кнопкой. Это сделано для того, чтобы веб-интерфейс нод всегда отображался корректно и предсказуемо.
*   **Изменение размера:** Если стандартный размер вам не подходит, вы можете изменить его вручную в файле `settings.ini` (параметры `WindowWidth` и `WindowHeight`).

### Рабочее пространство
1.  **Панель вкладок (слева):** Список всех ваших нод.
    *   **Формат названия:** `Идентификатор [IP-адрес:Порт]`.
    *   **Пример:** `IP01-Node01 [1.2.3.4:16126]`.
    *   Кликните по вкладке, чтобы переключиться на эту ноду.
2.  **Основная область (справа):** Веб-интерфейс выбранной ноды (FluxOS). Здесь вы выполняете вход и видите статус ноды.
3.  **Панель логов (внизу):** "Черный ящик", где отображаются все действия программы.
    *   **Формат строки:** `[Дата Время][ИСТОЧНИК] Сообщение`
    *   **Расшифровка источников:**
        *   `[DISCOVERY]`: Процесс поиска и проверки доступности нод.
        *   `[MAIN]`: Системные сообщения самого приложения.
        *   `[PRELOAD]`: События внутри веб-страницы ноды (обнаружение входа/выхода).
        *   `[AUTO]`: Работа алгоритма автоматического удаления.
        *   `[API]`: Результаты сетевых запросов к ноде.
    *   **Цветовая кодировка:**
        *   **Зеленый текст:** Безопасное приложение (не будет удалено).
        *   **Красный текст:** Целевое приложение (обнаружено совпадение, будет удалено!).
        *   **Желтый текст:** Процесс удаления приложения.

### Панель инструментов (Toolbar)
Кнопки быстрого доступа в верхней части окна:

*   **Reset (Сброс):** Принудительно перезагружает текущую вкладку и полностью очищает все данные сессии (кэш, куки, авторизацию). Помогает, если интерфейс ноды завис или не удается выполнить вход/выход.
*   **Settings (Настройки):** Открывает файл `settings.ini` в вашем текстовом редакторе по умолчанию.
*   **Docs (Документация):** Открывает это руководство пользователя.
*   **About (О программе):** Показывает версию приложения и информацию о лицензии.

## 4. Системные требования

Потребление ресурсов компьютером напрямую зависит от количества отслеживаемых узлов (вкладок).
Каждый узел — это отдельная вкладка браузера, потребляющая около **100-150 МБ** оперативной памяти (RAM).

**Примерные рекомендации:**
*   **1-8 узлов:** минимум 2 ГБ RAM, 2-ядерный процессор.
*   **9-20 узлов:** минимум 4 ГБ RAM, 4-ядерный процессор.
*   **20+ узлов:** рекомендуется 8 ГБ RAM и более.

*Предупреждение: Запуск большого количества узлов на слабом оборудовании может привести к замедлению работы системы.*

## 5. Настройка (`settings.ini`)

Перед использованием необходимо настроить файл `settings.ini`, который находится рядом с программой. Откройте его в любом текстовом редакторе (Блокнот, Notepad++).

#### `ScanIPs`
Список IP-адресов ваших узлов Flux.

**Важно:** Не используйте пробелы между адресами.

*Пример:*
```ini
ScanIPs = 1.2.3.4,5.6.7.8,9.10.11.12
```

#### `TargetAppPrefixes` (Правила удаления)
Здесь перечисляются ключевые слова для поиска приложений, которые нужно удалять.

*   **Принцип работы:** Приложение ищет указанный текст **в любой части имени** запущенного приложения (в начале, в середине или в конце).
*   **Чувствительность к регистру:** Регистр **ИМЕЕТ ЗНАЧЕНИЕ**. `Kaspa` и `kaspa` — это разные слова для программы. Указывайте имя точно так, как оно отображается в интерфейсе Flux.

*Пример:*
Если указать `TargetAppPrefixes = Folding,Test`, приложение удалит:
*   `FoldingAtHome` (содержит "Folding")
*   `MyTestApp` (содержит "Test")
*   `New-folding-node` (содержит "folding" — **НЕ УДАЛИТ**, так как регистр не совпадает с "Folding")

*Совет (Лайфхак):*
Чтобы узнать точное имя приложения, откройте в обычном браузере адрес вашей ноды: `http://IP_ВАШЕЙ_НОДЫ:ПОРТ/apps/localapps` (где ПОРТ — это ваш обычный порт веб-интерфейса, например 16126, 16136).
В открывшемся разделе **Local Apps** найдите нужное приложение, скопируйте его имя из колонки **Name** и вставьте в `settings.ini`.

```ini
TargetAppPrefixes = StuckContainer,MaliciousApp,TestApp
```

#### `AutomationIntervalSeconds`
Интервал в секундах между проверками. Рекомендуемое значение: 300 (5 минут).
```ini
AutomationIntervalSeconds = 300
```

## 6. Вход в систему (Логин)

Чтобы приложение могло управлять узлом, вы должны авторизоваться в веб-интерфейсе Flux.

1.  Запустите Flux Auto-Deleter.
2.  Дождитесь загрузки вкладок с вашими узлами.
3.  Перейдите на вкладку нужного узла.
4.  Вы увидите стандартный экран входа FluxOS.

**Способы входа:**

1.  **Автоматический вход (ZelCore установлен на этом компьютере):**
    1.  Нажмите на иконку **отпечатка пальца** (Login with Zelcore).
    2.  Система запросит разрешение на открытие приложения ZelCore. Разрешите это действие.
    3.  В открывшемся окне ZelCore нажмите кнопку "Sign and Send" (Подписать и отправить).
    4.  Вы автоматически авторизуетесь в FluxOS.

2.  **Ручной вход (Manual Login) — если ZelCore на другом компьютере:**
    *Рекомендуется использовать ZelCore, установленный на ПК, в целях безопасности.*
    Этот раздел содержит три поля: **Message**, **Address** и **Signature**.

    1.  Откройте **ZelCore** на вашем устройстве.
    2.  Перейдите в раздел **Apps**, выберите **Flux ID**.
    3.  Нажмите на первую сверху синюю кнопку **"Sign message"**.
    4.  **Важно:** Сдвиньте переключатель, чтобы выбрать **"Sign with Flux ID"** (по умолчанию выбрано "Sign with coin").
    5.  Нажмите кнопку **Copy**, чтобы скопировать ваш Flux ID, и вставьте его в поле **Address** в окне входа Flux Auto-Deleter.
    6.  В окне входа Flux Auto-Deleter скопируйте содержимое поля **Message**.
    7.  Вставьте этот текст в ZelCore в поле **"Message to sign"** и нажмите синюю кнопку **Sign message**.
    8.  Введите ваш PIN-код d2FA.
    9.  Появится окно "Message Signature". Скопируйте полученную подпись (нажав на иконку копирования).
    10. Вставьте эту строку в поле **Signature** в окне входа Flux Auto-Deleter.
    11. Нажмите большую синюю кнопку **Login**.

    Если всё сделано верно и срок действия сообщения не истёк, произойдёт авторизация.

**Как только вы войдёте в систему:**
*   В логах приложения (панель внизу) появится сообщение **"Received LOGIN notification"** или **"Token detected"**.
*   Через 5 секунд запустится автоматический цикл удаления приложений.

## 7. Обновление приложения

Мы планируем выпускать новые версии с улучшениями и исправлениями.

*   **Portable-версия:**
    Просто скачайте новый архив. Вы можете заменить старый `.exe` файл новым, сохранив ваш текущий файл `settings.ini`.

*   **Установщик (Setup):**
    При установке новой версии поверх старой файл настроек `settings.ini` может быть перезаписан стандартным файлом.
    **Рекомендуется:** Сделайте резервную копию вашего `settings.ini` перед запуском установщика обновления, а затем восстановите его (или скопируйте настройки) после завершения установки.

## 8. Проверка целостности файлов

Чтобы убедиться, что скачанные вами файлы не были повреждены или подменены, вы можете сверить их контрольные суммы (SHA-256) с файлом `checksums.txt` из официального релиза.

**Как проверить на Windows:**
1.  Откройте командную строку (PowerShell) в папке с файлом.
2.  Выполните команду:
    ```powershell
    Get-FileHash ИМЯ_ФАЙЛА -Algorithm SHA256
    ```
    *(Например: `Get-FileHash FluxAutoDeleter_Portable_1.0.0.zip`)*
3.  Сравните полученный хэш со строкой в `checksums.txt`. Они должны совпадать.

## 9. Удаление приложения

*   **Portable-версия:** Просто удалите папку с программой.
*   **Установщик:** Используйте стандартное удаление программ Windows ("Параметры" -> "Приложения").

**Полная очистка данных:**
Приложение хранит данные сессий (авторизацию на нодах) в отдельной системной папке. Если вы хотите полностью удалить все следы использования или сбросить все авторизации, выполните одно из следующих действий:

1.  **Автоматически:** Запустите входящий в комплект скрипт `clean-session.bat`.
    > **Примечание:** Скрипт работает как в CMD, так и в PowerShell. Права администратора НЕ требуются, но вы **должны закрыть приложение** перед запуском скрипта.

2.  **Вручную:** Удалите следующую папку:
    *   **Путь:** `%AppData%\flux-session-monitor`
        *(Обычно это `C:\Users\ИМЯ_ПОЛЬЗОВАТЕЛЯ\AppData\Roaming\flux-session-monitor`)*

## 10. Решение проблем (Troubleshooting)

**Проблема:** Сбои авторизации или остановка автоматического удаления.
**Симптомы:**
*   Вы успешно подписали сообщение в ZelCore, но веб-интерфейс ноды не реагирует, авторизация не происходит.
*   Веб-интерфейс ноды показывает, что вы авторизованы, но автоматизация не работает.
*   Приложение перестало удалять целевые программы на одной из нод без видимых причин.
*   Приложение в каждом цикле пытается удалить одно и то же приложение, но безуспешно (часто происходит после обновления версии FluxOS).

**Решение:**
Частая причина — обновление версии FluxOS (например, с v7.2.0 на v7.3.0) или повреждение кэша сессии. Старый токен становится недействительным, хотя внешне сессия выглядит активной.

1.  **Сброс вкладки:** Откройте вкладку проблемной ноды и нажмите кнопку **Reset** (Сброс) на верхней панели инструментов. Это очистит куки/кэш для этой ноды и перезагрузит её. Затем войдите заново.
2.  **Полный сброс:** Если предыдущий шаг не помог или приложение "вылетает", закройте программу и запустите файл `clean-session.bat` из папки с приложением. Это безопасно удалит все кэшированные данные и сессии. Перезапустите программу и войдите заново.

## 11. Поддержка и Донаты

Данное ПО распространяется бесплатно. Если оно оказалось полезным для вас, и вы хотите поддержать разработчика, вы можете отправить добровольное пожертвование на следующие адреса:

*   **FLUX:** `t1RFqDyjAqH1gVgdowqfwRbmMxqgdiwD9dH`
*   **BTC:** `bc1q2r73psn8zznzazx97h9cl4xj2mlywxmpsgydrx`
*   **ETH / USDT (ERC20):** `0x75b3e6773cd61d35532bc82d70aa90aded2b0cb2`
*   **TRON / USDT (TRC20):** `TLhZaC6dCkni74FZKtcDCe12zLUdpJFTk6`
*   **TON / USDT (TON):** `UQB5XehHEvZmhxi6AP1lS1MMOatouQCerJld6IIjmg3wQktB`